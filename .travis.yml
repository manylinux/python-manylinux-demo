notifications:
  email: false

matrix:
  include:
    - sudo: required
      services:
        - docker
      env: DOCKER_IMAGE=quay.io/pypa/manylinux1_x86_64
           PLAT=manylinux1_x86_64
    - sudo: required
      services:
        - docker
      env: DOCKER_IMAGE=quay.io/pypa/manylinux2010_x86_64
           PLAT=manylinux2010_x86_64

install:
  - docker pull $DOCKER_IMAGE

script:
  - docker run --rm -e PLAT=$PLAT -v `pwd`:/io $DOCKER_IMAGE $PRE_CMD /io/travis/build-wheels.sh
  - ls wheelhouse/

deploy:
  provider: s3
  access_key_id: AKIAJCVE5RZBSCMPSFSQ
  secret_access_key:
    secure: "IwFrgncz9SmeIlB93ZGW58ByD53Fk7AjZx6yzJjunm1qvoATFJRR8lGM7VfTfLu8f4JHld0XnJz5F5GJh1F9MZLPM8KoAC05pXt9iTyQh9da0bQR8jI6mh3OR9DTRaLg9/eWEyE88h0MDAwDHw/x3AP1+38rqKwPtg7FJdxKKhMyC3+x+8Y3mp6Dsmb/h1oajF5fQ7SylaIwgUd0AjROpLxe0+xfpUgDIJtR8IIaxqfaY9bow6zY+jsmfN6XCe+LUgZJ7miAyANffH27N2unX55Sd8V210oySwCkRB2cMowivEE4BUsW1cyN3cdSNQUL50bK5PtD/u62JbkhOaq8ay+l8edLu+wWAf2/ASMnuQMAshf709UQDe7qU9o7q/kASrJM5heIZaua1quEC1L8QdUFVvdzmpDb9+cBAceUzszU7f6gI+YfVhVED9if/irfSTN2mlNJuAZsf4FKn0G/u5XCOfxvT5/4P1vA+M7mZ/B1jibbEYS2YCwVEsLb4EpHjO0KbXV+DkrTGml7vYU904TE1Y5kS8cWXv/HUD+D0Oa/f8HxrYhNkA0TF/+KmxSAfNGq/PbdmHHTxvWho7jUQ7hv7S0lIC1a+Zi6U1AC65L1tchcRnGT680wVhtai4xLvksMCM1c1k+9Acq459LHqbA43d/z7dH5cqsMp8ML8Ac="
  bucket: parsely-artifacts
  skip_cleanup: true
  local_dir: wheelhouse
  upload_dir: lib/wheels

after_deploy:
  - 'curl -XPOST -H "Accept: application/json" "https://rundeck.cogtree.com/api/16/job/880b3e78-708f-44d8-b065-4e3460cf54b9/run?authtoken=$RUNDECK_APIKEY"'

env:
  global:
    # RUNDECK_APIKEY
    - secure: n4b3MsLnjZtA9X3FCd+ReeHsXxsoK+DijNdYVqicGkROk7c35mYohEZOV988phjFNFsZnPycFli9wK7+LcH68yHl7IhyQzKCIILEMDnnbIMLk92zrQ1kf0iYHIVxkw5FK74XDyAXbmb17WxRErLZTPhLQALtXJ5uel1FWIPf5ZGLG/jwoBza0FI6mVMhGIdWkJoHU4A2lU1YAPzVi/Ze0fmAnz3IjEidJFB9MDTqIhgKmTBqWzC7AXb9GM1GvZpL1omT8JvhiTeaT2kBYhWlnj1KcSYZjk12jzQ6Uv8Lv9uSRBhiXfV4fpcnVDG+O0PYIFQ73GjDvfGhgBV4uww9Rj3iaLGB9ZQO/uQC8ihWKfJtVf1VdXtu2R7v0f6eAqwRKZ0wU31QlA3lJ6wFA9oOw0m2fsFXeUWNCrM9HnIbScgRlyrQz/p1UpaXPNmGI3e4FJpQU3HC04aais9K5XPWYT8l/nFbkApcEhirubKOj2WJVAYx7zFIpWsdIGlUx41nuawYbZ108XZHo9QSb0hMDGUCZN1lyRhU/iJCrlnLJXlVLZBrPrpYNUC9j7xnUkZeJjiifRNR1d2tdGiO5zzK98hA2hWYRXmwDbMKipAKg31QGP8PFY/57uyVMpbazBhTvMHj/DwPEfSnULJ2He90IvJ7Jc3NuwpBZl83yBSFwUU=